openapi: 3.0.0
info:
  title: 'Payment Gateways API Microservice'
  description: 'Payment Gateways API Microservice, Version v1'
  contact:
    name: 'Support Team'
    email: support@ultainfinity.com
  version: v1
servers:
  -
    url: 'http://localhost:8100/v1'
    description: 'Payment Gateways API Microservice, Version v1'
paths:
  /admin/gateway/settings:
    get:
      tags:
        - 'Admin / Gateway / Settings'
      summary: 'Display list of all payment gateway settings'
      description: 'Display list of all payment gateway settings'
      operationId: a22b533f3ef482c3d084e47ce36b9cc0
      parameters:
        -
          name: limit
          in: query
          description: 'Count of orders in response'
          required: false
          schema:
            type: integer
            default: 20
        -
          name: page
          in: query
          description: 'Page of list'
          required: false
          schema:
            type: integer
            default: 1
      responses:
        '200':
          description: Success
      security:
        -
          default:
            - ManagerRead
            - User
            - ManagerWrite
      x-auth-type: 'Application & Application User'
      x-throttling-tier: Unlimited
      x-wso2-application-security:
        security-types:
          - oauth2
        optional: 'false'
    post:
      tags:
        - 'Admin / Gateway / Settings'
      summary: 'Method to add new payment gateway settings'
      description: 'method to add new payment gateway settings'
      operationId: c25bad6eeb9a44214e89f75ae7cd8925
      requestBody:
        required: true
        content:
          application/json:
            schema:
              properties:
                payment_gateway_name:
                  description: 'Name of the payment gateway'
                  type: string
                stripe_webhook_secret:
                  description: 'The web hook secret'
                  type: string
                stripe_public_key:
                  description: 'Publick key'
                  type: string
                stripe_secret_key:
                  description: 'Secret key'
                  type: string
                paypal_mode:
                  description: 'payment mode'
                  type: string
                paypal_notify_url:
                  description: 'Payment notify url'
                  type: string
                paypal_currency:
                  description: 'payment currency type'
                  type: string
                  default: USD
                paypal_sandbox_client_id:
                  description: 'payment sandbox client ID'
                  type: string
                paypal_sandbox_client_secret:
                  description: 'payment sandbox client secret'
                  type: string
                paypal_live_client_id:
                  description: 'paypal_payment live client ID'
                  type: string
                paypal_live_client_secret:
                  description: 'payment live client secret'
                  type: string
                openpayd_username:
                  description: 'Openpayd payment username'
                  type: string
                openpayd_password:
                  description: 'Openpayd payment password'
                  type: string
                openpayd_url:
                  description: 'Openpayd payment url'
                  type: string
                openpayd_public_key_path:
                  description: 'Openpayd payment public key path'
                  type: string
                coinbase_api_key:
                  description: 'Coinbase API key'
                  type: string
                coinbase_webhook_key:
                  description: 'Coinbase webhook key'
                  type: string
                coinbase_redirect_url:
                  description: 'Coinbase redirect URL'
                  type: string
                coinbase_cancel_url:
                  description: 'Coinbase cancel url'
                  type: string
                bitpay_environment:
                  description: 'bitpay environment'
                  type: string
                bitpay_api_token_merchant:
                  description: 'bitpay api token merchant'
                  type: string
                bitpay_api_token_payroll:
                  description: 'bitpay api token payroll'
                  type: string
                bitpay_key_path:
                  description: 'bitpay key path'
                  type: string
                bitpay_private_key_password:
                  description: 'bitpay private key password'
                  type: string
                bitpay_payment_webhook_url:
                  description: 'bitpay payment webhook url'
                  type: string
                bitpay_redirect_url:
                  description: 'bitpay redirect url'
                  type: string
                status:
                  description: 'Currently in use settings'
                  type: integer
                  default: 1
              type: object
      responses:
        '200':
          description: Success
      security:
        -
          default:
            - ManagerRead
            - User
            - ManagerWrite
      x-auth-type: 'Application & Application User'
      x-throttling-tier: Unlimited
      x-wso2-application-security:
        security-types:
          - oauth2
        optional: 'false'
  '/admin/gateway/{id}/settings':
    get:
      tags:
        - 'Admin / Gateway / Settings'
      summary: 'Display all payment gateway settings details'
      description: 'show all payment gateway settings details'
      operationId: e3a2cc1546e3c93389601ed8a55f241a
      responses:
        '200':
          description: Success
      security:
        -
          default:
            - ManagerRead
            - User
            - ManagerWrite
      x-auth-type: 'Application & Application User'
      x-throttling-tier: Unlimited
      x-wso2-application-security:
        security-types:
          - oauth2
        optional: 'false'
    put:
      tags:
        - 'Admin / Gateway / Settings'
      summary: 'Method to update payment gateway settings'
      description: 'method to update payment gateway settings'
      operationId: e502548f1e1e082e95b7f5118750b9fe
      requestBody:
        required: true
        content:
          application/json:
            schema:
              properties:
                id:
                  description: 'primary key to the record'
                  type: string
                payment_gateway_name:
                  description: 'Name of the payment gateway'
                  type: string
                stripe_webhook_secret:
                  description: 'The web hook secret'
                  type: string
                stripe_public_key:
                  description: 'Publick key'
                  type: string
                stripe_secret_key:
                  description: 'Secret key'
                  type: string
                paypal_mode:
                  description: 'payment mode'
                  type: string
                paypal_notify_url:
                  description: 'Payment notify url'
                  type: string
                paypal_currency:
                  description: 'payment currency type'
                  type: string
                  default: USD
                paypal_sandbox_client_id:
                  description: 'payment sandbox client ID'
                  type: string
                paypal_sandbox_client_secret:
                  description: 'payment sandbox client secret'
                  type: string
                paypal_live_client_id:
                  description: 'paypal_payment live client ID'
                  type: string
                paypal_live_client_secret:
                  description: 'payment live client secret'
                  type: string
                openpayd_username:
                  description: 'Openpayd payment username'
                  type: string
                openpayd_password:
                  description: 'Openpayd payment password'
                  type: string
                openpayd_url:
                  description: 'Openpayd payment url'
                  type: string
                openpayd_public_key_path:
                  description: 'Openpayd payment public key path'
                  type: string
                coinbase_api_key:
                  description: 'Coinbase API key'
                  type: string
                coinbase_webhook_key:
                  description: 'Coinbase webhook key'
                  type: string
                coinbase_redirect_url:
                  description: 'Coinbase redirect URL'
                  type: string
                coinbase_cancel_url:
                  description: 'Coinbase cancel url'
                  type: string
                bitpay_environment:
                  description: 'bitpay environment'
                  type: string
                bitpay_api_token_merchant:
                  description: 'bitpay api token merchant'
                  type: string
                bitpay_api_token_payroll:
                  description: 'bitpay api token payroll'
                  type: string
                bitpay_key_path:
                  description: 'bitpay key path'
                  type: string
                bitpay_private_key_password:
                  description: 'bitpay private key password'
                  type: string
                bitpay_payment_webhook_url:
                  description: 'bitpay payment webhook url'
                  type: string
                bitpay_redirect_url:
                  description: 'bitpay redirect url'
                  type: string
                status:
                  description: 'Currently in use settings'
                  type: integer
                  default: 1
              type: object
      responses:
        '200':
          description: Success
      security:
        -
          default:
            - ManagerRead
            - User
            - ManagerWrite
      x-auth-type: 'Application & Application User'
      x-throttling-tier: Unlimited
      x-wso2-application-security:
        security-types:
          - oauth2
        optional: 'false'
    delete:
      tags:
        - 'Admin / Gateway / Settings'
      summary: 'Method to delete payment gateway settings'
      description: 'method to delete payment gateway settings'
      operationId: 249e0b973fb054a80c3b474f4d6e9bd6
      requestBody:
        required: true
        content:
          application/json:
            schema:
              properties:
                id:
                  description: 'primary key to the record'
                  type: string
              type: object
      responses:
        '200':
          description: Success
      security:
        -
          default:
            - ManagerRead
            - User
            - ManagerWrite
      x-auth-type: 'Application & Application User'
      x-throttling-tier: Unlimited
      x-wso2-application-security:
        security-types:
          - oauth2
        optional: 'false'
  /admin/payments:
    get:
      tags:
        - 'Admin / Payments'
      summary: 'Display Payments list'
      description: 'Display list of all patment orders'
      operationId: 1b2c89bb92681ab2d13efe37908a995f
      parameters:
        -
          name: limit
          in: query
          description: 'count ot orders in return'
          required: false
          schema:
            type: integer
            default: 20
        -
          name: page
          in: query
          description: 'page of list'
          required: false
          schema:
            type: integer
            default: 1
      responses:
        '200':
          description: Success
      security:
        -
          default:
            - ManagerRead
            - User
            - ManagerWrite
      x-auth-type: 'Application & Application User'
      x-throttling-tier: Unlimited
      x-wso2-application-security:
        security-types:
          - oauth2
        optional: 'false'
    post:
      tags:
        - 'Admin / Payments'
      summary: 'Method for proof of payment by payment order'
      description: 'Method for proof of payment by payment order'
      operationId: 50be77f03d54266b7d186615280efa97
      responses:
        '200':
          description: Success
      security:
        -
          default:
            - ManagerRead
            - User
            - ManagerWrite
      x-auth-type: 'Application & Application User'
      x-throttling-tier: Unlimited
      x-wso2-application-security:
        security-types:
          - oauth2
        optional: 'false'
  /admin/payments/lost:
    get:
      tags:
        - 'Admin / Payments'
      summary: 'Display invoice list not finished'
      description: 'Display list of all patment orders'
      operationId: f38978919109b6cf9aa1f3a916de01ea
      parameters:
        -
          name: limit
          in: query
          description: 'count at orders in return'
          required: false
          schema:
            type: integer
            default: 20
        -
          name: page
          in: query
          description: 'page of list, 1 - first page'
          required: false
          schema:
            type: integer
            default: 1
        -
          name: gateway
          in: query
          description: 'filter by gateway'
          required: false
          schema:
            type: string
            default: ''
      responses:
        '200':
          description: Success
      security:
        -
          default:
            - ManagerRead
            - User
            - ManagerWrite
      x-auth-type: 'Application & Application User'
      x-throttling-tier: Unlimited
      x-wso2-application-security:
        security-types:
          - oauth2
        optional: 'false'
  /payments/charge:
    post:
      tags:
        - Payments
      summary: 'Make payment and charge wallet balance or invoice'
      description: 'Make payment and charge wallet balance or invoice'
      operationId: 576db5189fef552c041f1696c0303952
      requestBody:
        required: true
        content:
          application/json:
            schema:
              properties:
                gateway:
                  description: 'Payment gateway'
                  type: string
                  default: bitpay
                amount:
                  description: 'The amount of money replenished to the balance'
                  type: integer
                  default: 1000
                currency:
                  description: 'Currency of balance'
                  type: string
                  default: GBP
                service:
                  description: 'Target service: '
                  type: string
              type: object
      responses:
        '200':
          description: Success
      security:
        -
          default:
            - ManagerRead
            - User
            - ManagerWrite
      x-auth-type: 'Application & Application User'
      x-throttling-tier: Unlimited
      x-wso2-application-security:
        security-types:
          - oauth2
        optional: 'false'
  '/payments/{id}':
    get:
      tags:
        - Payments
      summary: 'Get detail info about payment transaction'
      description: 'Get detail info about payment transaction'
      operationId: f544d55b7f000c8f444cc28872a25fc6
      parameters:
        -
          name: id
          in: path
          description: 'Payment transaction ID'
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 'Data of payment transaction'
        '404':
          description: 'Payment transaction not found'
      security:
        -
          default:
            - ManagerRead
            - User
            - ManagerWrite
      x-auth-type: 'Application & Application User'
      x-throttling-tier: Unlimited
      x-wso2-application-security:
        security-types:
          - oauth2
        optional: 'false'
  /payment-systems:
    get:
      tags:
        - 'Payment Systems'
      description: 'List of payment systems'
      operationId: 2bcc90bfd1fbe6862aa4a37a5186d7b1
      responses:
        '200':
          description: Success
      security:
        -
          default:
            - ManagerRead
            - User
            - ManagerWrite
      x-auth-type: 'Application & Application User'
      x-throttling-tier: Unlimited
      x-wso2-application-security:
        security-types:
          - oauth2
        optional: 'false'
  '/webhooks/{gateway}/invoices':
    post:
      tags:
        - Webhooks
      summary: 'Invoices webhook'
      description: 'Webhooks Notifications about invoices'
      operationId: 4e10edbf20caba7acafbf8a30c3ce410
      parameters:
        -
          name: gateway
          in: path
          description: 'Payment gateway'
          required: true
          schema:
            type: string
            default: bitpay
      responses:
        '200':
          description: Success
      security:
        -
          default:
            - ManagerRead
            - User
            - ManagerWrite
      x-auth-type: 'Application & Application User'
      x-throttling-tier: Unlimited
      x-wso2-application-security:
        security-types:
          - oauth2
        optional: 'false'
components:
  securitySchemes:
    default:
      type: oauth2
      description: 'Auth Scheme'
      flows:
        implicit:
          authorizationUrl: 'https://sumraid.com/oauth2'
          scopes:
            ManagerRead: 'Manager can read'
            User: 'User access'
            ManagerWrite: 'Manager can write'
